# Maintainer: CRT<crt.011@gmail.com>
# Contributor: Alexandros Konstantinakis - Karmis <el04092@mail.ntua.gr>
# Contributor: Jeremie Lasalle Ratelle <lasallej@iro.umontreal.ca>
pkgname=tovid
pkgver=0.33
pkgrel=4
pkgdesc="A suite of tools for creating video DVDs, VCDs, and SVCDs"
depends=('mplayer' 'mjpegtools' 'ffmpeg' 'python' 'wxpython' 'cairo' 'pycairo' \
'imagemagick' 'dvdauthor' 'dvd+rw-tools' 'vcdimager' 'transcode' 'sox' 'normalize' 'python-imaging')
optdepends=('tk' 'tcl')
makedepends=('txt2tags')
arch=('i686' 'x86_64')
url="http://tovid.wikia.com"
license="GPL"
conflicts=('tovid-svn')
source=(http://tovid.googlecode.com/files/$pkgname-$pkgver.tar.gz)
md5sums=('078610cf7a5296d59bdd8c7cc88ffb77')

build() {
  cd ${srcdir}/${pkgname}-${pkgver}

  for file in setup.py src/titleset-wizard; do
    sed -i 's_#!/usr/bin/env python_#!/usr/bin/env python2_' $file
  done

  for file in src/tovid src/todiscgui src/tovid-stats; do
    sed -i 's_#! /usr/bin/env python_#!/usr/bin/env python2_' $file
  done 
}

package() {
  cd ${srcdir}/${pkgname}-${pkgver} 
  python2 setup.py install --root="$pkgdir"
  install -D -m644 COPYING "$pkgdir"/usr/share/licenses/"$pkgname"/COPYING
}
