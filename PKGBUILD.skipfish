# Maintainer: Alex Cartwright (alexc223@googlemail.com)
# Contributor: CRT <crt.011@gmail.com>
pkgname=skipfish
pkgver=2.03b
pkgrel=1
pkgdesc="A fully automated, active web application security reconnaissance tool"
arch=('any')
license=('APACHE')
url='http://code.google.com/p/skipfish/'
depends=('openssl' 'libidn' 'zlib' 'glibc' 'sh')
source=("http://skipfish.googlecode.com/files/${pkgname}-${pkgver}.tgz"
	"skipfish.patch")

md5sums=('ff860b840ec7e579e9fac08e4fd8f4e2'
         '8005ba69d76fec57ba53a2a1feaedac5')

build() {
	cd "${srcdir}/${pkgname}-${pkgver}"

	# Patch fixes application run directory system error
	patch -Np0 -i ../skipfish.patch
	make
}	

package() {
	cd "${srcdir}/${pkgname}-${pkgver}"
	install -d -Dm 0755 "${pkgdir}"/usr/share/"${pkgname}"
	install -d -Dm 0755 "${pkgdir}"/usr/share/licenses/"${pkgname}"
	install -d -Dm 0755 "${pkgdir}"/usr/share/"${pkgname}"/dictionaries
	install -Dm 0644 dictionaries/* "${pkgdir}"/usr/share/"${pkgname}"/dictionaries
	install -d -Dm 0755 assets "${pkgdir}"/usr/share/"${pkgname}"/assets 
	install -Dm 0644 assets/* "${pkgdir}"/usr/share/"${pkgname}"/assets
	install -Dm 0755 skipfish "${pkgdir}"/usr/bin/skipfish
	install -m644 COPYING "${pkgdir}"/usr/share/licenses/"${pkgname}"/COPYING
}
